*** Settings ***
Library           Mobile.ADB    FA357PN01129
Library           Mobile.ATX
Library           Mobile.py    WITH NAME    sealnote

*** Test Cases ***
Try to save empty note
    Init mobile
    open app
    sealnote.set_text    1234    com.twistedplane.sealnote:id/password_meter_input
    sealnote.click    com.twistedplane.sealnote:id/password_action_button
    sealnote.click    resourceId=com.twistedplane.sealnote:id/create_note_button
    sealnote.click    resourceId=com.twistedplane.sealnote:id/action_save_note
    text should be    Create a New Note
    [Teardown]    clean app

Try to save note no tags
    Init mobile
    open app
    sealnote.set_text    1234    resourceId=com.twistedplane.sealnote:id/password_meter_input
    sealnote.click    com.twistedplane.sealnote:id/password_action_button
    sealnote.click    resourceId=com.twistedplane.sealnote:id/create_note_button
    sealnote.set_text    hello    resourceId=com.twistedplane.sealnote:id/note_activity_title
    sealnote.set_text    good    resourceId=com.twistedplane.sealnote:id/note_activity_note
    builtin.sleep    2s
    sealnote.click    resourceId=com.twistedplane.sealnote:id/action_save_note
    Note title should be    hello
    Note text should be    good
    [Teardown]    clean app

Try to save note no context
    Init mobile
    open app
    sealnote.set_text    1234    resourceId=com.twistedplane.sealnote:id/password_meter_input
    sealnote.click    com.twistedplane.sealnote:id/password_action_button
    sealnote.click    resourceId=com.twistedplane.sealnote:id/create_note_button
    sealnote.set_text    hello    resourceId=com.twistedplane.sealnote:id/note_activity_title
    builtin.sleep    2s
    sealnote.click    resourceId=com.twistedplane.sealnote:id/action_save_note
    Note title should be    hello
    [Teardown]    clean app

Try to save note no title
    Init mobile
    open app
    sealnote.set_text    1234    resourceId=com.twistedplane.sealnote:id/password_meter_input
    sealnote.click    com.twistedplane.sealnote:id/password_action_button
    sealnote.click    resourceId=com.twistedplane.sealnote:id/create_note_button
    sealnote.set_text    good    resourceId=com.twistedplane.sealnote:id/note_activity_note
    builtin.sleep    2s
    sealnote.click    resourceId=com.twistedplane.sealnote:id/action_save_note
    Note text should be    good
    [Teardown]    clean app

Try to save note only tags
    Init mobile
    open app
    sealnote.set_text    1234    resourceId=com.twistedplane.sealnote:id/password_meter_input
    sealnote.click    com.twistedplane.sealnote:id/password_action_button
    sealnote.click    resourceId=com.twistedplane.sealnote:id/create_note_button
    sealnote.set_text    shadowverse    resourceId=com.twistedplane.sealnote:id/note_activity_tags
    builtin.sleep    2s
    sealnote.click    resourceId=com.twistedplane.sealnote:id/action_save_note
    text should be    Create a New Note
    [Teardown]    clean app

Try to save note have tags and context
    Init mobile
    open app
    sealnote.set_text    1234    resourceId=com.twistedplane.sealnote:id/password_meter_input
    sealnote.click    com.twistedplane.sealnote:id/password_action_button
    sealnote.click    resourceId=com.twistedplane.sealnote:id/create_note_button
    sealnote.set_text    shadowverse    resourceId=com.twistedplane.sealnote:id/note_activity_tags
    sealnote.set_text    good    resourceId=com.twistedplane.sealnote:id/note_activity_note
    builtin.sleep    2s
    sealnote.click    resourceId=com.twistedplane.sealnote:id/action_save_note
    Note text should be    good
    tags should be    tags.png
    [Teardown]    clean app

Try to save note have tags and title
    Init mobile
    open app
    sealnote.set_text    1234    resourceId=com.twistedplane.sealnote:id/password_meter_input
    sealnote.click    com.twistedplane.sealnote:id/password_action_button
    sealnote.click    resourceId=com.twistedplane.sealnote:id/create_note_button
    sealnote.set_text    shadowverse    resourceId=com.twistedplane.sealnote:id/note_activity_tags
    sealnote.set_text    hello    resourceId=com.twistedplane.sealnote:id/note_activity_title
    builtin.sleep    2s
    sealnote.click    resourceId=com.twistedplane.sealnote:id/action_save_note
    Note title should be    hello
    tags should be    tags.png
    [Teardown]    clean app

Try to save two note
    Init mobile
    open app
    sealnote.set_text    1234    com.twistedplane.sealnote:id/password_meter_input
    sealnote.click    com.twistedplane.sealnote:id/password_action_button
    sealnote.click    resourceId=com.twistedplane.sealnote:id/create_note_button
    sealnote.set_text    hello    resourceId=com.twistedplane.sealnote:id/note_activity_title
    sealnote.set_text    good    resourceId=com.twistedplane.sealnote:id/note_activity_note
    builtin.sleep    2s
    sealnote.click    resourceId=com.twistedplane.sealnote:id/action_save_note
    builtin.sleep    2s
    sealnote.click    resourceId=com.twistedplane.sealnote:id/action_new_note
    mobile.ATX.click_image    plain_text.png
    sealnote.set_text    hello1    resourceId=com.twistedplane.sealnote:id/note_activity_title
    sealnote.set_text    good1    resourceId=com.twistedplane.sealnote:id/note_activity_note
    builtin.sleep    2s
    sealnote.click    resourceId=com.twistedplane.sealnote:id/action_save_note
    mobile.ATX.assertImage    hello.png
    mobile.ATX.assertImage    hello1.png
    [Teardown]    clean app

Login Detail
    Init mobile
    open app
    sealnote.set_text    1234    com.twistedplane.sealnote:id/password_meter_input
    sealnote.click    com.twistedplane.sealnote:id/password_action_button
    builtin.sleep    2s
    sealnote.click    resourceId=com.twistedplane.sealnote:id/action_new_note
    mobile.ATX.clickImage    login_detail.png
    sealnote.set_text    shadowverse    resourceId=com.twistedplane.sealnote:id/note_activity_tags
    sealnote.set_text    Account    resourceId=com.twistedplane.sealnote:id/note_activity_title
    sealnote.set_text    https://shadowverse.gamewith.jp/    resourceId=com.twistedplane.sealnote:id/note_login_url
    sealnote.set_text    3345678    resourceId=com.twistedplane.sealnote:id/note_login_name
    sealnote.set_text    3345678    resourceId=com.twistedplane.sealnote:id/note_login_password
    sealnote.set_text    OTK    resourceId=com.twistedplane.sealnote:id/note_additional_note
    sealnote.click    resourceId=com.twistedplane.sealnote:id/action_save_note
    mobile.ATX.assertImage    account.png
    tags should be    tags.png
    [Teardown]    clean app

Edit tag
    Init mobile
    open app
    sealnote.set_text    1234    com.twistedplane.sealnote:id/password_meter_input
    sealnote.click    com.twistedplane.sealnote:id/password_action_button
    sealnote.click    resourceId=com.twistedplane.sealnote:id/create_note_button
    sealnote.set_text    shadowverse    resourceId=com.twistedplane.sealnote:id/note_activity_tags
    sealnote.set_text    hello    resourceId=com.twistedplane.sealnote:id/note_activity_title
    sealnote.set_text    good    resourceId=com.twistedplane.sealnote:id/note_activity_note
    builtin.sleep    2s
    sealnote.click    resourceId=com.twistedplane.sealnote:id/action_save_note
    mobile.ATX.clickImage    note.png
    builtin.sleep    2s
    mobile.ATX.clickImage    tags.png
    builtin.sleep    2s
    mobile.ATX.clickImage    edit_tag_setting.png
    builtin.sleep    1s
    mobile.ATX.clickImage    edit_tag.png
    builtin.sleep    1s
    mobile.ATX.clickImage    shadowverse.png
    delete
    builtin.sleep    1s
    sealnote.set_text    shadowverse_edit    resourceId=com.twistedplane.sealnote:id/input_rename
    sealnote.click    resourceId=android:id/button1
    Image should be    shadowverse_edit.png
    mobile.ATX.clickImage    deleteTag.png
    Click Label     確定
    Note Should Not Be Exsist    shadowverse_edit.png

Type empty password
    Clean SealNote Data
    Init mobile
    Open SealNote
    BuiltIn.Sleep    1s
    sealnote.click    resourceId=com.twistedplane.sealnote:id/password_action_button
    Dialog Should Be Show    Invalid password!
    sealnote.click    resourceId=android:id/button1
    Close SealNote

Test Degress Of Password
    Init mobile
    Open SealNote
    BuiltIn.Sleep    1s
    Type Password    1234
    Degree Of Password Should Be    Weak
    Type Password    12345
    Degree Of Password Should Be    So-so
    Type Password    0989
    Degree Of Password Should Be    Good
    Type Password    123456
    Degree Of Password Should Be    Strong
    Close SealNote

Type Error Password
    Clean SealNote Data
    Init mobile
    Open SealNote
    BuiltIn.Sleep    1s
    Type Password    1234
    sealnote.click    resourceId=com.twistedplane.sealnote:id/password_action_button
    BuiltIn.Sleep    2s
    Close SealNote
    Open SealNote
    BuiltIn.Sleep    1s
    Type Password    4321
    sealnote.click    resourceId=com.twistedplane.sealnote:id/password_action_button
    Toast Should Be Show    InvalidPassword.png
    BuiltIn.Sleep    2s
    Close SealNote

Test Credit Card
    Init mobile
    open app
    Type Password    1234
    sealnote.click    com.twistedplane.sealnote:id/password_action_button
    BuiltIn.Sleep    1s
    Mobile.ATX.ClickImage    newNote.png
    Click Label    Card Details
    BuiltIn.Sleep    1s
    Type Credit Card Number    4716152906495672
    Credit Card Should Be Show    VISA.png
    sealnote.clear_text    resourceId=com.twistedplane.sealnote:id/note_card_number
    BuiltIn.Sleep    2s
    Type Credit Card Number    5528550136127699
    Credit Card Should Be Show    MasterCard.png
    sealnote.clear_text    resourceId=com.twistedplane.sealnote:id/note_card_number
    BuiltIn.Sleep    2s
    Type Credit Card Number    349444104493903
    Credit Card Should Be Show    American.png
    sealnote.clear_text    resourceId=com.twistedplane.sealnote:id/note_card_number
    BuiltIn.Sleep    2s

Change Note Color
    Init mobile
    open app
    Type Password    1234
    sealnote.Click    com.twistedplane.sealnote:id/password_action_button
    Mobile.ATX.ClickImage    newNote.png
    BuiltIn.Sleep    1s
    Click Label    Plain Text
    BuiltIn.Sleep    1s
    sealnote.Set_Text    It_will_be_Colored    resourceId=com.twistedplane.sealnote:id/note_activity_title
    sealnote.Set_Text    wow!wow!    resourceId=com.twistedplane.sealnote:id/note_activity_note
    sealnote.Click    resourceId=com.twistedplane.sealnote:id/action_save_note
    Mobile.ATX.ClickImage    noColorNote.png
    sealnote.Click    resourceId=com.twistedplane.sealnote:id/action_color
    Mobile.ATX.ClickImage    Blue.png
    sealnote.Click    resourceId=com.twistedplane.sealnote:id/action_save_note
    Note should be Exsist    BlueNote.png

Delete a Note
    Init mobile
    open app
    Type Password    1234
    sealnote.Click    com.twistedplane.sealnote:id/password_action_button
    Mobile.ATX.ClickImage    newNote.png
    BuiltIn.Sleep    1s
    Click Label    Plain Text
    BuiltIn.Sleep    1s
    sealnote.Set_Text    It_will_be_deleted    resourceId=com.twistedplane.sealnote:id/note_activity_title
    sealnote.Set_Text    hey!hey!    resourceId=com.twistedplane.sealnote:id/note_activity_note
    sealnote.Click    resourceId=com.twistedplane.sealnote:id/action_save_note
    Mobile.ATX.ClickImage    trashNote.png
    Mobile.ATX.ClickImage    more.png
    Click Label    Delete
    Note Should Not Be Exsist    trashNote.png
    Mobile.ATX.ClickImage    note.png
    BuiltIn.Sleep    1s
    Click Label    Trash
    Mobile.ATX.ClickImage    trashNote.png
    sealnote.Click    resourceId=com.twistedplane.sealnote:id/action_restore
    Mobile.ATX.ClickImage    TrashNavi.png
    Mobile.ATX.ClickImage    Notes.png
    Note Should Be Exsist    trashNote.png
    Mobile.ADB.shell_cmd    am force-stop com.twistedplane.sealnote

*** Keywords ***
Init mobile
    SealNote.set_serial    FA357PN01129

Open App
    SealNote.execute_adb_shell_command    am force-stop com.twistedplane.sealnote
    SealNote.execute_adb_shell_command    pm clear com.twistedplane.sealnote
    Mobile.ADB.shell_cmd    am start -n com.twistedplane.sealnote/.SealnoteActivity

Text should be
    [Arguments]    ${expect}
    ${text2}    sealnote.get object    resourceId=com.twistedplane.sealnote:id/create_note_button
    ${title}    sealnote.get info of object    ${text2}
    BuiltIn.Should Be Equal    ${title['text']}    ${expect}

Note title should be
    [Arguments]    ${expect}
    ${text2}    sealnote.get object    resourceId=com.twistedplane.sealnote:id/card_header_inner_simple_title
    ${title}    sealnote.get info of object    ${text2}
    BuiltIn.Should Be Equal    ${title['text']}    ${expect}

Note text should be
    [Arguments]    ${expect}
    ${text2}    sealnote.get object    resourceId=com.twistedplane.sealnote:id/cardcontent_note
    ${title}    sealnote.get info of object    ${text2}
    BuiltIn.Should Be Equal    ${title['text']}    ${expect}

Clean app
    SealNote.execute_adb_shell_command    pm clear com.twistedplane.sealnote

Tags should be
    [Arguments]    ${img}
    Mobile.ATX.clickImage    note.png
    builtin.sleep    2s
    ${boolean}    Mobile.ATX.assertImage    ${img}
    BuiltIn.Should Be True    ${boolean}

Image should be
    [Arguments]    ${img}
    ${boolean}    Mobile.ATX.assertImage    ${img}
    BuiltIn.Should Be True    ${boolean}

delete
    sealnote.click    resourceId=com.twistedplane.sealnote:id/input_rename
    sealnote.press_delete
    sealnote.press_delete
    sealnote.press_delete
    sealnote.press_delete
    sealnote.press_delete
    sealnote.press_delete
    sealnote.press_delete
    sealnote.press_delete
    sealnote.press_delete
    sealnote.press_delete
    sealnote.press_delete

Open SealNote
    Init mobile
    Mobile.ADB.shell_cmd    am start -n com.twistedplane.sealnote/.SealnoteActivity

Clean SealNote Data
    Mobile.ADB.shell_cmd    pm clear com.twistedplane.sealnote

Close SealNote
    Mobile.ADB.shell_cmd    am force-stop com.twistedplane.sealnote

Type Password
    [Arguments]    ${password}
    sealnote.set_text    ${password}    resourceId=com.twistedplane.sealnote:id/password_meter_input

Degree Of Password Should Be
    [Arguments]    ${degree}
    ${text}    sealnote.Get Object    resourceId=com.twistedplane.sealnote:id/password_meter_text
    ${title}    sealnote.Get Info Of Object    ${text}
    BuiltIn.Should Be Equal    ${title['text']}    ${degree}

Type Credit Card Number
    [Arguments]    ${number}
    sealnote.set_text    ${number}    resourceId=com.twistedplane.sealnote:id/note_card_number

Credit Card Should Be Show
    [Arguments]    ${card}
    ${boolean}    Mobile.ATX.assertImage    ${card}
    BuiltIn.Should Be True    ${boolean}

Toast Should Be Show
    [Arguments]    ${toast}
    BuiltIn.Sleep    1s
    ${boolean}    Mobile.ATX.assertImage    ${toast}
    BuiltIn.Should Be True    ${boolean}

Note Should Not Be Exsist
    [Arguments]    ${note}
    BuiltIn.Sleep    1s
    ${boolean}    Mobile.ATX.assertImage    ${note}
    BuiltIn.Should Not Be True    ${boolean}

Note Should Be Exsist
    [Arguments]    ${note}
    BuiltIn.Sleep    1s
    ${boolean}    Mobile.ATX.assertImage    ${note}
    BuiltIn.Should Be True    ${boolean}

Dialog Should Be Show
    [Arguments]    ${msg}
    ${text}    sealnote.Get Object    resourceId=android:id/message
    ${title}    sealnote.Get Info Of Object    ${text}
    BuiltIn.Should Be Equal    ${title['text']}    ${msg}

Click Label
    [Arguments]    ${name}
    Mobile.ATX.Click_by_string    ${name}
